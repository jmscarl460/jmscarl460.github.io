<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SupreNews - Latest News</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: "Poppins", sans-serif;
            background-color: #f8f9fa;
        }
        .news-container {
            max-width: 900px;
            margin: 20px auto;
        }
        .news-card {
            margin-bottom: 20px;
        }
        .news-card img {
            max-height: 200px;
            object-fit: cover;
        }
    </style>
</head>
<body>

    <div class="container news-container">
        <h1 class="text-center mt-4">SupreNews - Latest Headlines</h1>
        <div id="news-list" class="mt-4"></div>
    </div>

    <script>
        const newsList = document.getElementById("news-list");

        // API Keys
        const apiKey1 = "3c78b2bb7cc143de9974c08d3a17357d"; // NewsAPI
        const apiKey2 = "d2b2677dfe15ec3a45dc3982b0344fb6"; // Mediastack

        // API URLs
        const newsAPI_URL = `https://newsapi.org/v2/top-headlines?country=ph&apiKey=${apiKey1}`;
        const mediastack_URL = `https://api.mediastack.com/v1/news?access_key=${apiKey2}&countries=ph&limit=5`;

        async function fetchNews() {
            try {
                // Fetch from both APIs
                const [newsApiResponse, mediastackResponse] = await Promise.all([
                    fetch(newsAPI_URL).then(res => res.json()),
                    fetch(mediastack_URL).then(res => res.json())
                ]);

                let articles = [];

                // Merge results from both APIs
                if (newsApiResponse.articles) {
                    articles = articles.concat(newsApiResponse.articles);
                }
                if (mediastackResponse.data) {
                    articles = articles.concat(mediastackResponse.data);
                }

                if (articles.length === 0) {
                    newsList.innerHTML = "<p class='text-center'>No news available at the moment.</p>";
                    return;
                }

                // Display news
                articles.forEach(article => {
                    const { title, description, url, urlToImage, image, source } = article;
                    const newsItem = `
                        <div class="card news-card">
                            ${urlToImage || image ? `<img src="${urlToImage || image}" class="card-img-top" alt="News Image">` : ""}
                            <div class="card-body">
                                <h5 class="card-title">${title}</h5>
                                <p class="card-text">${description ? description : "No description available."}</p>
                                <p class="text-muted">Source: ${source?.name || "Unknown"}</p>
                                <a href="${url}" target="_blank" class="btn btn-primary">Read More</a>
                            </div>
                        </div>
                    `;
                    newsList.innerHTML += newsItem;
                });

            } catch (error) {
                console.error("Error fetching news:", error);
                newsList.innerHTML = "<p class='text-danger'>Failed to load news. Please try again later.</p>";
            }
        }

        fetchNews();
    </script>

</body>
</html>
